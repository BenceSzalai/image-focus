!function(i,t,e){function a(t,e){this.element=t,this.options=i.extend({},s,e),this._defaults=s,this._name=o,this.init()}var o="imageFocus",s={},c={focus:{x:50,y:50},attachmentId:!1},n={imageFocus:{self:"image-focus",wrapper:"image-focus__wrapper",img:"image-focus__img",point:"image-focus__point",clickarea:"image-focus__clickarea"}};a.prototype={init:function(){this.setImageData(),this.addFocusPoint(),i("."+n.imageFocus.clickarea).on("click",this.moveFocusPoint)},setImageData:function(){c.attachmentId=i(this.element).data("id")},addFocusPoint:function(){console.log("add focuspoint");var t,e=i(".edit-attachment-frame .attachment-media-view .details-image");e.addClass(n.imageFocus.img),e.wrap('<div class="'+n.imageFocus.self+'"><div class="'+n.imageFocus.wrapper+'"></div></div>'),(t=i("."+n.imageFocus.wrapper)).append('<div class="'+n.imageFocus.point+'"></div>'),t.append('<div class="'+n.imageFocus.clickarea+'"></div>')},moveFocusPoint:function(t){var e=i(this).width(),a=i(this).height(),o=(t.pageX-i(this).offset().left)/e*100,s=(t.pageY-i(this).offset().top)/a*100;c.focus.x=o,c.focus.y=s,console.log("percentageX:"+o.toFixed(2)+", percentageY:"+s.toFixed(2)),i("."+n.imageFocus.point).css({left:o+"%",top:s+"%"})}},i.fn[o]=function(t){return this.each(function(){i.data(this,"plugin_"+o)||i.data(this,"plugin_"+o,new a(this,t))})}}(jQuery,window,document),function(i,t,e){i(e).on("ready",function(){setInterval(function(){var t=i(".attachment-details");if(t.find(".details-image").length&&!i(".image-focus").length)try{t.imageFocus()}catch(i){console.log(i)}},500)})}(jQuery,window,document);